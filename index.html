<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lazare Bitcoin Address Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            min-height: 100vh;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(50px);
            -webkit-backdrop-filter: blur(50px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }
        
        .glass-strong {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }
        
        .glass-light {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .glass-orange {
            background: rgba(251, 146, 60, 0.1);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(251, 146, 60, 0.2);
        }
        
        .input-glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .input-glass::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        
        .input-glass:focus {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(251, 146, 60, 0.3);
            outline: none;
        }
        
        .btn-glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-glass:hover {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.5);
        }
        
        .btn-orange {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
            border: 1px solid rgba(251, 146, 60, 0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px 0 rgba(251, 146, 60, 0.3);
        }
        
        .btn-orange:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px 0 rgba(251, 146, 60, 0.5);
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        }
        
        .scrollbar-glass::-webkit-scrollbar {
            width: 8px;
        }
        
        .scrollbar-glass::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
        
        .scrollbar-glass::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .scrollbar-glass::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .text-shadow {
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .glow-orange {
            box-shadow: 0 0 30px rgba(251, 146, 60, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        const { Search, Wallet, ArrowUpRight, ArrowDownLeft, TrendingUp, Plus, X, GitCompare, Bitcoin } = lucide;
        
        let state = {
            addresses: [],
            currentInput: '',
            loading: false,
            error: '',
            compareMode: false
        };

        function formatBTC(satoshis) {
            return (satoshis / 100000000).toFixed(8);
        }

        function formatSatoshis(satoshis) {
            return satoshis.toLocaleString();
        }

        function formatDate(timestamp) {
            return new Date(timestamp * 1000).toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        async function fetchWalletData(address) {
            try {
                const cleanAddress = address.trim();
                const response = await fetch(`https://mempool.space/api/address/${cleanAddress}`);
                
                if (!response.ok) {
                    throw new Error(`API returned status ${response.status}`);
                }

                const data = await response.json();
                
                const txResponse = await fetch(`https://mempool.space/api/address/${cleanAddress}/txs`);
                const transactions = await txResponse.json();

                return {
                    address: cleanAddress,
                    balance: data.chain_stats.funded_txo_sum - data.chain_stats.spent_txo_sum,
                    totalReceived: data.chain_stats.funded_txo_sum,
                    totalSent: data.chain_stats.spent_txo_sum,
                    txCount: data.chain_stats.tx_count,
                    transactions: transactions.slice(0, 10)
                };
            } catch (err) {
                throw err;
            }
        }

        async function addAddress() {
            if (!state.currentInput.trim()) {
                state.error = 'Please enter a wallet address';
                render();
                return;
            }

            if (state.addresses.length >= 2) {
                state.error = 'Maximum 2 addresses for comparison';
                render();
                return;
            }

            state.loading = true;
            state.error = '';
            render();

            try {
                const walletData = await fetchWalletData(state.currentInput);
                state.addresses.push(walletData);
                state.currentInput = '';
            } catch (err) {
                state.error = `Error: ${err.message}. Please check the address and try again.`;
            } finally {
                state.loading = false;
                render();
            }
        }

        function removeAddress(index) {
            state.addresses.splice(index, 1);
            render();
        }

        function clearAll() {
            state.addresses = [];
            state.currentInput = '';
            state.error = '';
            render();
        }

        function toggleCompareMode() {
            state.compareMode = !state.compareMode;
            if (!state.compareMode) {
                state.addresses = state.addresses.slice(0, 1);
            }
            render();
        }

        function render() {
            const root = document.getElementById('root');
            
            root.innerHTML = `
                <div class="min-h-screen p-4 md:p-8 lg:p-12">
                    <div class="max-w-7xl mx-auto">
                        <!-- Header -->
                        <div class="text-center mb-16 pt-12 animate-float">
                            <div class="inline-flex items-center gap-5 mb-8">
                                <div class="glass-card p-5 rounded-3xl glow-orange">
                                    <i data-lucide="wallet" class="w-12 h-12 text-orange-500"></i>
                                </div>
                                <div class="text-left">
                                    <h1 class="text-6xl md:text-7xl font-bold text-white tracking-tight text-shadow mb-2">
                                        Lazare
                                    </h1>
                                    <p class="text-orange-500 text-sm font-semibold tracking-widest uppercase">Bitcoin Address Tracker</p>
                                </div>
                            </div>
                            <p class="text-gray-400 text-lg font-light max-w-2xl mx-auto leading-relaxed">
                                Track and analyze Bitcoin wallet addresses with real-time data. 
                                Compare multiple addresses to gain deeper insights.
                            </p>
                        </div>

                        <!-- Compare Toggle -->
                        <div class="flex justify-center mb-10">
                            <button
                                id="compareToggle"
                                class="btn-glass inline-flex items-center gap-3 px-10 py-5 rounded-2xl text-white font-medium text-base"
                            >
                                <i data-lucide="git-compare" class="w-5 h-5"></i>
                                <span>${state.compareMode ? 'Exit Compare Mode' : 'Compare Addresses'}</span>
                            </button>
                        </div>

                        <!-- Search Bar -->
                        <div class="mb-16 max-w-4xl mx-auto">
                            <div class="glass-card rounded-3xl p-3 shadow-2xl">
                                <div class="flex flex-col md:flex-row items-stretch md:items-center gap-3 px-4">
                                    <div class="flex items-center gap-4 flex-1">
                                        <i data-lucide="search" class="w-6 h-6 text-gray-400"></i>
                                        <input
                                            type="text"
                                            id="addressInput"
                                            value="${state.currentInput}"
                                            placeholder="Enter Bitcoin address to track..."
                                            class="flex-1 input-glass border-none outline-none text-white py-5 text-base rounded-xl px-6 transition-all"
                                        />
                                    </div>
                                    <button
                                        id="addBtn"
                                        ${state.loading ? 'disabled' : ''}
                                        class="btn-orange px-10 py-5 text-white rounded-xl font-bold text-base disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        ${state.loading ? 'Loading...' : state.addresses.length > 0 ? '+ Add Address' : 'Track Address'}
                                    </button>
                                </div>
                            </div>
                            ${state.error ? `<p class="text-orange-400 text-sm mt-5 text-center font-medium">${state.error}</p>` : ''}
                            ${state.compareMode ? `<p class="text-gray-500 text-sm mt-4 text-center">Compare mode is active • You can add up to 2 addresses</p>` : ''}
                        </div>

                        ${state.addresses.length > 0 ? `
                            <!-- Wallet Cards Container -->
                            <div class="grid grid-cols-1 ${state.addresses.length > 1 ? 'lg:grid-cols-2' : ''} gap-10 mb-12">
                                ${state.addresses.map((wallet, walletIdx) => `
                                    <div class="glass-card rounded-3xl p-8 shadow-2xl">
                                        <!-- Wallet Header -->
                                        <div class="flex items-start justify-between mb-10">
                                            <div class="flex items-center gap-4">
                                                <div class="glass p-3.5 rounded-2xl">
                                                    <i data-lucide="wallet" class="w-7 h-7 text-orange-500"></i>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-gray-500 mb-2 uppercase tracking-wider font-semibold">Wallet Address</p>
                                                    <p class="text-sm font-mono text-gray-300 font-medium">${wallet.address.slice(0, 16)}...${wallet.address.slice(-12)}</p>
                                                </div>
                                            </div>
                                            <button onclick="removeAddress(${walletIdx})" class="glass p-3 rounded-xl hover:bg-white/10 transition-all">
                                                <i data-lucide="x" class="w-5 h-5 text-gray-400"></i>
                                            </button>
                                        </div>

                                        <!-- Balance Card -->
                                        <div class="glass-orange rounded-3xl p-8 mb-8 glow-orange">
                                            <div class="flex items-center justify-between mb-6">
                                                <div class="flex items-center gap-3">
                                                    <div class="glass-light p-3 rounded-xl">
                                                        <i data-lucide="bitcoin" class="w-6 h-6 text-orange-500"></i>
                                                    </div>
                                                    <span class="text-gray-400 text-sm font-bold tracking-wider uppercase">Total Balance</span>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <span class="text-6xl font-bold text-white text-shadow">
                                                    ${formatBTC(wallet.balance)}
                                                </span>
                                                <span class="text-2xl text-orange-500 font-bold ml-2">BTC</span>
                                            </div>
                                            <p class="text-gray-400 text-sm font-medium">${formatSatoshis(wallet.balance)} satoshis</p>
                                        </div>

                                        <!-- Stats Grid -->
                                        <div class="grid grid-cols-2 gap-5 mb-8">
                                            <!-- Received -->
                                            <div class="glass rounded-2xl p-6 hover:bg-white/5 transition-all">
                                                <div class="flex items-center gap-3 mb-4">
                                                    <div class="glass-light p-2.5 rounded-xl bg-green-500/10">
                                                        <i data-lucide="arrow-down-left" class="w-5 h-5 text-green-400"></i>
                                                    </div>
                                                    <span class="text-gray-400 text-xs font-bold uppercase tracking-wide">Received</span>
                                                </div>
                                                <p class="text-3xl font-bold text-white mb-2">
                                                    ${formatBTC(wallet.totalReceived)}
                                                </p>
                                                <p class="text-gray-500 text-xs">${formatSatoshis(wallet.totalReceived)} sats</p>
                                            </div>

                                            <!-- Sent -->
                                            <div class="glass rounded-2xl p-6 hover:bg-white/5 transition-all">
                                                <div class="flex items-center gap-3 mb-4">
                                                    <div class="glass-light p-2.5 rounded-xl bg-red-500/10">
                                                        <i data-lucide="arrow-up-right" class="w-5 h-5 text-red-400"></i>
                                                    </div>
                                                    <span class="text-gray-400 text-xs font-bold uppercase tracking-wide">Sent</span>
                                                </div>
                                                <p class="text-3xl font-bold text-white mb-2">
                                                    ${formatBTC(wallet.totalSent)}
                                                </p>
                                                <p class="text-gray-500 text-xs">${formatSatoshis(wallet.totalSent)} sats</p>
                                            </div>
                                        </div>

                                        <!-- Transactions -->
                                        <div class="glass rounded-2xl p-6">
                                            <div class="flex items-center gap-3 mb-6">
                                                <i data-lucide="trending-up" class="w-5 h-5 text-gray-400"></i>
                                                <h3 class="text-base font-bold text-white uppercase tracking-wide">Recent Activity</h3>
                                                <span class="text-gray-500 text-xs font-medium">${wallet.txCount} transactions</span>
                                            </div>

                                            <div class="space-y-3 max-h-96 overflow-y-auto scrollbar-glass pr-2">
                                                ${wallet.transactions.map(tx => {
                                                    const isReceived = tx.vout.some(v => v.scriptpubkey_address === wallet.address);
                                                    const amount = isReceived
                                                        ? tx.vout.reduce((sum, v) => v.scriptpubkey_address === wallet.address ? sum + v.value : sum, 0)
                                                        : tx.vin.reduce((sum, v) => v.prevout?.scriptpubkey_address === wallet.address ? sum + v.prevout.value : sum, 0);
                                                    
                                                    return `
                                                        <div class="glass-light rounded-xl p-4 hover:bg-white/5 transition-all">
                                                            <div class="flex items-center justify-between">
                                                                <div class="flex items-center gap-4 flex-1">
                                                                    <div class="glass-light p-2.5 rounded-lg ${isReceived ? 'bg-green-500/10' : 'bg-red-500/10'}">
                                                                        <i data-lucide="${isReceived ? 'arrow-down-left' : 'arrow-up-right'}" 
                                                                           class="w-4 h-4 ${isReceived ? 'text-green-400' : 'text-red-400'}"></i>
                                                                    </div>
                                                                    <div class="flex-1 min-w-0">
                                                                        <p class="text-gray-300 text-xs font-mono font-medium mb-1 truncate">
                                                                            ${tx.txid.slice(0, 16)}...${tx.txid.slice(-8)}
                                                                        </p>
                                                                        <p class="text-gray-500 text-[10px]">
                                                                            ${tx.status.confirmed ? formatDate(tx.status.block_time) : 'Unconfirmed'}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                                <div class="text-right ml-4">
                                                                    <p class="text-sm font-bold ${isReceived ? 'text-green-400' : 'text-red-400'} mb-1">
                                                                        ${isReceived ? '+' : '-'}${formatBTC(amount)}
                                                                    </p>
                                                                    <p class="text-[10px] text-gray-500">${formatSatoshis(amount)} sats</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    `;
                                                }).join('')}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>

                            <!-- Clear Button -->
                            <div class="flex justify-center mb-12">
                                <button
                                    id="clearBtn"
                                    class="btn-glass px-12 py-5 text-white rounded-2xl font-medium text-base"
                                >
                                    Track Another Address
                                </button>
                            </div>
                        ` : ''}

                        <!-- Empty State -->
                        ${state.addresses.length === 0 && !state.loading ? `
                            <div class="text-center py-32">
                                <div class="glass-card inline-flex p-10 rounded-full mb-8 shadow-2xl animate-float">
                                    <i data-lucide="wallet" class="w-20 h-20 text-gray-600"></i>
                                </div>
                                <h3 class="text-white text-2xl font-bold mb-3 text-shadow">
                                    Welcome to Lazare
                                </h3>
                                <p class="text-gray-400 text-base font-light mb-2 max-w-md mx-auto">
                                    Enter a Bitcoin address above to start tracking wallet activity
                                </p>
                                <p class="text-gray-600 text-sm">
                                    Real-time data • Compare addresses • Track transactions
                                </p>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;

            lucide.createIcons();

            const input = document.getElementById('addressInput');
            const addBtn = document.getElementById('addBtn');
            const clearBtn = document.getElementById('clearBtn');
            const compareToggle = document.getElementById('compareToggle');
            
            if (input) {
                input.addEventListener('input', (e) => {
                    state.currentInput = e.target.value;
                });
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') addAddress();
                });
            }
            
            if (addBtn) {
                addBtn.addEventListener('click', addAddress);
            }

            if (clearBtn) {
                clearBtn.addEventListener('click', clearAll);
            }

            if (compareToggle) {
                compareToggle.addEventListener('click', toggleCompareMode);
            }

            window.removeAddress = removeAddress;
        }

        render();
    </script>
</body>
</html>